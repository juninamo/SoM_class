# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰ï¼šã‚·ãƒ³ã‚°ãƒ«ã‚»ãƒ«è§£æç’°å¢ƒã®æ§‹ç¯‰

ã“ã®[ã‚¬ã‚¤ãƒ‰](https://github.com/juninamo/SoM_class/blob/main/setup_guide_jp.md)ã§ã¯ã€ã‚·ãƒ³ã‚°ãƒ«ã‚»ãƒ«è§£æãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã«å¿…è¦ãªç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚**macOS** ã¨ **Windows** ã®ä¸¡æ–¹ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

> **âš ï¸ é‡è¦ï¼šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦**
> æœ¬ã‚¬ã‚¤ãƒ‰ã§ã¯ã€å†ç¾æ€§ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«**å…·ä½“çš„ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·**ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚
> è¬›ç¾©è³‡æ–™ (`single_cell_analysis_T.html`) ã®çµæœã‚’å†ç¾ã™ã‚‹ãŸã‚ã€å¯èƒ½ãªé™ã‚ŠæŒ‡å®šã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

---

## 0. å¿…è¦ãªPCã‚¹ãƒšãƒƒã‚¯

ã‚·ãƒ³ã‚°ãƒ«ã‚»ãƒ«è§£æã¯ãƒ¡ãƒ¢ãƒªã‚’å¤šãä½¿ç”¨ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚¹ãƒšãƒƒã‚¯ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

| é …ç›® | æ¨å¥¨ã‚¹ãƒšãƒƒã‚¯ |
|------|------------|
| OS | macOS 13ä»¥é™ / Windows 10 (64-bit) ä»¥é™ |
| ãƒ¡ãƒ¢ãƒª (RAM) | **8 GBä»¥ä¸Š**ï¼ˆ16 GBæ¨å¥¨ï¼‰ |
| ãƒ‡ã‚£ã‚¹ã‚¯ç©ºãå®¹é‡ | **10 GBä»¥ä¸Š** |
| CPU | Intel / Apple Silicon (M1/M2/M3/M4) |

---

## 1. ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰ã®ä½¿ã„æ–¹

æœ¬ã‚¬ã‚¤ãƒ‰ã§ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã¨ã¯ã€ãƒ†ã‚­ã‚¹ãƒˆã§ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«æŒ‡ç¤ºã‚’å‡ºã™ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

### macOS ã®å ´åˆ

1. **Spotlightæ¤œç´¢**ï¼ˆ`Command âŒ˜` + `Space`ï¼‰ã§ã€Œ**ã‚¿ãƒ¼ãƒŸãƒŠãƒ«**ã€ã¾ãŸã¯ã€Œ**Terminal**ã€ã¨å…¥åŠ›
2. è¡¨ç¤ºã•ã‚ŒãŸ **ã‚¿ãƒ¼ãƒŸãƒŠãƒ«.app** ã‚’é–‹ãã¾ã™
3. é»’ã„ç”»é¢ã«ãƒ†ã‚­ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æº–å‚™å®Œäº†ã§ã™

> **ğŸ’¡ ãƒ’ãƒ³ãƒˆ**ï¼šLaunchpad â†’ ãã®ä»– â†’ ã‚¿ãƒ¼ãƒŸãƒŠãƒ« ã‹ã‚‰ã‚‚é–‹ã‘ã¾ã™ã€‚

### Windows ã®å ´åˆ

Windows ã«ã¯è¤‡æ•°ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ãŒã€æœ¬ã‚¬ã‚¤ãƒ‰ã§ã¯ **Miniforge Prompt** ã‚’ä½¿ç”¨ã—ã¾ã™ï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³2ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ï¼‰ã€‚

Miniforgeã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‰ã«å‹•ä½œç¢ºèªã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ã§ **PowerShell** ã‚’é–‹ãã“ã¨ãŒã§ãã¾ã™ï¼š

1. **ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã® `Windows` ã‚­ãƒ¼** ã‚’æŠ¼ã—ã¦ã€ã€Œ**PowerShell**ã€ã¨å…¥åŠ›
2. è¡¨ç¤ºã•ã‚ŒãŸ **Windows PowerShell** ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é–‹ãã¾ã™
3. é’ã„ç”»é¢ã« `PS C:\Users\(ãƒ¦ãƒ¼ã‚¶ãƒ¼å)>` ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°æº–å‚™å®Œäº†ã§ã™

> **âš ï¸ æ³¨æ„ï¼ˆWindowsï¼‰**ï¼šã‚»ã‚¯ã‚·ãƒ§ãƒ³2ä»¥é™ã§ã¯ã€å¿…ãš **Miniforge Prompt** ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
> Miniforge Prompt ã¯ Conda ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã‚‹ã‚ˆã†ã«è¨­å®šã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã™ã€‚

### ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ–¹æ³•

ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã¯ã€è¡¨ç¤ºã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆ`$` ã‚„ `>` ã®å¾Œï¼‰ã«ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã€**Enterã‚­ãƒ¼** ã‚’æŠ¼ã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚
æœ¬ã‚¬ã‚¤ãƒ‰ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯å†…ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’**1è¡Œãšã¤**ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆã—ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```
# ã“ã®è¡Œã¯ã€Œã‚³ãƒ¡ãƒ³ãƒˆã€ã§ã™ï¼ˆ# ã§å§‹ã¾ã‚‹è¡Œã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ï¼‰
# ä¸‹ã®è¡ŒãŒã‚³ãƒãƒ³ãƒ‰ã®ä¾‹ã§ã™ï¼š
conda --version
```

---

## 2. Condaï¼ˆMiniforgeï¼‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Ræœ¬ä½“ã‚„Rãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å«ã‚ã€å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã¯ã™ã¹ã¦ **Conda** ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
Condaã‚’ä½¿ã†ã“ã¨ã§ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ­£ç¢ºã«æŒ‡å®šã—ã€ç’°å¢ƒã‚’åˆ†é›¢ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### macOS ã®å ´åˆ

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

#### Apple Silicon (M1/M2/M3/M4) Mac ã®å ´åˆ

```bash
# Miniforgeã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
curl -L -O "https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-MacOSX-arm64.sh"

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆå…¨ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é€²ã‚ã¦ãã ã•ã„ï¼‰
bash Miniforge3-MacOSX-arm64.sh
```

#### Intel Mac ã®å ´åˆ

```bash
curl -L -O "https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-MacOSX-x86_64.sh"
bash Miniforge3-MacOSX-x86_64.sh
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€**ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‰ã˜ã¦å†åº¦é–‹ã„ã¦ãã ã•ã„**ã€‚
ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å…ˆé ­ã« `(base)` ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æˆåŠŸã§ã™ã€‚

### Windows ã®å ´åˆ

1. [Miniforgeãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸](https://github.com/conda-forge/miniforge/releases/latest) ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™
2. **`Miniforge3-Windows-x86_64.exe`** ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å®Ÿè¡Œã—ã¾ã™
3. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«é€”ä¸­ã®è¨­å®šç”»é¢ã§ï¼š
   - **ã€ŒAdd Miniforge3 to my PATH environment variableã€** ã« â˜‘ï¸ ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ãã ã•ã„
   - **ã€ŒRegister Miniforge3 as my default Pythonã€** ã«ã‚‚ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ãã ã•ã„
4. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†å¾Œã€**ã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼** ã‚’é–‹ãã€ã€Œ**Miniforge Prompt**ã€ã¨æ¤œç´¢ã—ã¦é–‹ãã¾ã™

> **ğŸ’¡ ãƒ’ãƒ³ãƒˆï¼ˆWindowsï¼‰**ï¼šä»¥é™ã®ã™ã¹ã¦ã®ä½œæ¥­ã¯ **Miniforge Prompt** ã§è¡Œã£ã¦ãã ã•ã„ã€‚
> é€šå¸¸ã®ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚„PowerShellã§ã¯ `conda` ã‚³ãƒãƒ³ãƒ‰ãŒå‹•ä½œã—ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

---

## 3. Condaç’°å¢ƒã®ä½œæˆã¨ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ **1è¡Œãšã¤** ã‚¿ãƒ¼ãƒŸãƒŠãƒ« (macOS) ã¾ãŸã¯ Miniforge Prompt (Windows) ã«å…¥åŠ›ã—ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

### Step A. Condaç’°å¢ƒã®ä½œæˆï¼ˆR 4.3.2ï¼‰

#### macOS ã®å ´åˆ

```bash
# scworkshop ã¨ã„ã†åå‰ã®ç’°å¢ƒã‚’ä½œæˆ
# R 4.3.2 ã¨ RStudio ã‚’åŒæ™‚ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™
conda create -n scworkshop -c conda-forge r-base=4.3.2 rstudio=2024.04.2 -y
```

#### Windows ã®å ´åˆ

Windows ã§ã¯ RStudio ã‚’ conda ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããªã„ãŸã‚ã€R ã®ã¿ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
# scworkshop ã¨ã„ã†åå‰ã®ç’°å¢ƒã‚’ä½œæˆï¼ˆR 4.3.2 ã®ã¿ï¼‰
conda create -n scworkshop -c conda-forge r-base=4.3.2 -y
```

> **â± æ³¨æ„ï¼šåˆå›ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã¯10ã€œ20åˆ†ç¨‹åº¦ã‹ã‹ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚** é€”ä¸­ã§æ­¢ã¾ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¦ã‚‚ã€ãã®ã¾ã¾å¾…ã£ã¦ãã ã•ã„ã€‚

> **âš ï¸ ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆ**ï¼š
> `=4.3.2` ã‚„ `=2024.04.2` ãªã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’å‰Šé™¤ã—ã¦å†å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
> ä¾‹ï¼š
> ```bash
> # macOSï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šãªã—ï¼‰
> conda create -n scworkshop -c conda-forge r-base rstudio -y
> # Windowsï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šãªã—ï¼‰
> conda create -n scworkshop -c conda-forge r-base -y
> ```

### Step B. ç’°å¢ƒã®æœ‰åŠ¹åŒ–

```bash
# ç’°å¢ƒã‚’æœ‰åŠ¹åŒ–ï¼ˆä»¥é™ã®ä½œæ¥­ã¯å¿…ãšã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…ˆã«å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼‰
conda activate scworkshop
```

ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å…ˆé ­ãŒ `(scworkshop)` ã«å¤‰ã‚ã£ãŸã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

> **âš ï¸ é‡è¦**ï¼šã‚¿ãƒ¼ãƒŸãƒŠãƒ« / Miniforge Prompt ã‚’é–‹ããŸã³ã« `conda activate scworkshop` ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### Step C. Rãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆcondaçµŒç”±ï¼‰

`single_cell_analysis_T.Rmd` ã§ä½¿ç”¨ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
# CRANãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
conda install -c conda-forge \
  r-seurat=5.2.1 \
  r-patchwork=1.1.3 \
  r-dplyr=1.1.4 \
  r-magrittr=2.0.3 \
  r-rmarkdown=2.25 \
  r-knitr=1.45 \
  r-bookdown=0.37 \
  -y
```

> **ğŸ’¡ Windows ã§ã®æ³¨æ„**ï¼šWindows ã§ã¯ `\`ï¼ˆãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã€è¡Œã®ç¶™ç¶šè¨˜å·ï¼‰ãŒå‹•ä½œã—ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
> ãã®å ´åˆã¯ã€ã™ã¹ã¦ã‚’ **1è¡Œ** ã«ã¾ã¨ã‚ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š
> ```bash
> conda install -c conda-forge r-seurat=5.2.1 r-patchwork=1.1.3 r-dplyr=1.1.4 r-magrittr=2.0.3 r-rmarkdown=2.25 r-knitr=1.45 r-bookdown=0.37 -y
> ```

> **âš ï¸ ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆ**ï¼š
> `=5.2.1` ãªã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’ã™ã¹ã¦å‰Šé™¤ã—ã¦å†å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
> ```bash
> conda install -c conda-forge r-seurat r-patchwork r-dplyr r-magrittr r-rmarkdown r-knitr r-bookdown -y
> ```

### Step D. Bioconductorãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆcondaçµŒç”±ï¼‰

```bash
# BiocStyle ã‚’Biocondaãƒãƒ£ãƒ³ãƒãƒ«ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
conda install -c bioconda -c conda-forge \
  bioconductor-biocstyle=2.30.0 \
  -y
```

> **ğŸ’¡ Windows ã§ã®1è¡Œç‰ˆ**ï¼š
> ```bash
> conda install -c bioconda -c conda-forge bioconductor-biocstyle=2.30.0 -y
> ```

> **âš ï¸ ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆ**ï¼š
> ```bash
> conda install -c bioconda -c conda-forge bioconductor-biocstyle -y
> ```

---

## 4. RStudio ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨èµ·å‹•

### macOS ã®å ´åˆ

RStudioã¯Step Aã§condaã¨ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã™ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰èµ·å‹•ã—ã¾ã™ï¼š

```bash
# ç’°å¢ƒã‚’æœ‰åŠ¹åŒ–ï¼ˆã¾ã å®Ÿè¡Œã—ã¦ã„ãªã„å ´åˆï¼‰
conda activate scworkshop

# RStudioã‚’èµ·å‹•
rstudio &
```

> **âš ï¸ æ³¨æ„ï¼ˆmacOSï¼‰**ï¼šãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«ã‚ã‚‹RStudioã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‹ã‚‰ã§ã¯ãªãã€å¿…ãšä¸Šè¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã§èµ·å‹•ã—ã¦ãã ã•ã„ã€‚
> ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰èµ·å‹•ã—ãªã„ã¨ã€condaç’°å¢ƒã®RãŒä½¿ç”¨ã•ã‚Œãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

### Windows ã®å ´åˆ

Windows ã§ã¯ RStudio ã‚’æ‰‹å‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€condaç’°å¢ƒã® R ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚

#### 1. RStudio ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

1. [posit.co/download/rstudio-desktop/](https://posit.co/download/rstudio-desktop/) ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™
2. **ç„¡æ–™ç‰ˆï¼ˆFree versionï¼‰** ã® Windows ç”¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å®Ÿè¡Œã—ã¾ã™

#### 2. Miniforge Prompt ã‹ã‚‰ RStudio ã‚’èµ·å‹•ã™ã‚‹

conda ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ R ã¯ Windows ã®ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«ç™»éŒ²ã•ã‚Œãªã„ãŸã‚ã€RStudio ã®è¨­å®šç”»é¢ï¼ˆGlobal Optionsï¼‰ã‹ã‚‰ã¯é¸æŠã§ãã¾ã›ã‚“ã€‚
ä»£ã‚ã‚Šã«ã€**Miniforge Prompt ã‹ã‚‰ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ RStudio ã‚’èµ·å‹•**ã—ã¾ã™ã€‚

Miniforge Prompt ã‚’é–‹ãã€**æ¯å›ä»¥ä¸‹ã®3è¡Œã‚’å®Ÿè¡Œ**ã—ã¦ãã ã•ã„ï¼š

```bash
conda activate scworkshop
set RSTUDIO_WHICH_R=%CONDA_PREFIX%\Scripts\R.exe
"C:\Program Files\RStudio\rstudio.exe"
```

> **âš ï¸ ä¸Šè¨˜ã®ãƒ‘ã‚¹ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆ**ï¼šRStudio ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆãŒç•°ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
> ä»¥ä¸‹ã®ãƒ‘ã‚¹ã‚‚è©¦ã—ã¦ãã ã•ã„ï¼š
> ```bash
> "C:\Program Files\RStudio\bin\rstudio.exe"
> ```
> ãã‚Œã§ã‚‚è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§ã€ŒRStudioã€ã‚’å³ã‚¯ãƒªãƒƒã‚¯ â†’ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ã‚’é–‹ãã€ã§ãƒ‘ã‚¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

> **ğŸ’¡ è§£èª¬**ï¼š`RSTUDIO_WHICH_R` ã¯ã€Œã©ã® R ã‚’ä½¿ã†ã‹ã€ã‚’ RStudio ã«æ•™ãˆã‚‹ç’°å¢ƒå¤‰æ•°ã§ã™ã€‚
> ã“ã®æ–¹æ³•ã§èµ·å‹•ã™ã‚Œã°ã€conda ç’°å¢ƒã® R ãŒè‡ªå‹•çš„ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

> **ğŸ’¡ ç¢ºèª**ï¼šRStudio ãŒèµ·å‹•ã—ãŸã‚‰ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ï¼ˆå·¦ä¸‹ã®ãƒ‘ãƒãƒ«ï¼‰ã« `R version 4.3.2` ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

> **âš ï¸ æ³¨æ„**ï¼šãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚„ã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã® RStudio ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‹ã‚‰ã¯èµ·å‹•ã—ãªã„ã§ãã ã•ã„ã€‚
> å¿…ãšä¸Šè¨˜ã®æ‰‹é †ã§ Miniforge Prompt ã‹ã‚‰èµ·å‹•ã—ã¦ãã ã•ã„ã€‚

#### ï¼ˆä»£æ›¿æ¡ˆï¼‰RStudioãªã—ã§Rã‚’ç›´æ¥ä½¿ã†

ä¸Šè¨˜ã®æ–¹æ³•ã§ã‚‚ã†ã¾ãã„ã‹ãªã„å ´åˆã¯ã€Miniforge Prompt ã‹ã‚‰ R ã‚’ç›´æ¥èµ·å‹•ã§ãã¾ã™ï¼š

```bash
conda activate scworkshop
R
```

R ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ãã“ã«ã‚³ãƒãƒ³ãƒ‰ã‚’ç›´æ¥å…¥åŠ›ã—ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

---

## 5. ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™

### A. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã®ä½œæˆ

ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã¾ã™ã€‚

#### macOS ã®å ´åˆï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
```bash
# ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¸ç§»å‹•
cd ~/Desktop

# ãƒ•ã‚©ãƒ«ãƒ€ã®ä½œæˆ
mkdir SingleCellWorkshop
cd SingleCellWorkshop

# ãƒ‡ãƒ¼ã‚¿ç”¨ãƒ•ã‚©ãƒ«ãƒ€ã®ä½œæˆ
mkdir data
```

#### Windows ã®å ´åˆï¼ˆMiniforge Promptï¼‰
```bash
# ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¸ç§»å‹•
cd %USERPROFILE%\Desktop

# ãƒ•ã‚©ãƒ«ãƒ€ã®ä½œæˆ
mkdir SingleCellWorkshop
cd SingleCellWorkshop

# ãƒ‡ãƒ¼ã‚¿ç”¨ãƒ•ã‚©ãƒ«ãƒ€ã®ä½œæˆ
mkdir data
```

#### ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã®ã‚¤ãƒ¡ãƒ¼ã‚¸
ä½œæˆå¾Œã®æ§‹æˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š
```
SingleCellWorkshop/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ JIAsyno_CITEseq_T_share.rds         (Tç´°èƒè§£æç”¨ãƒ‡ãƒ¼ã‚¿)
â”‚   â”œâ”€â”€ JIAsyno_CITEseq_T_full.rds          (æ¤œè¨¼ç”¨ãƒ•ãƒ«ãƒ‡ãƒ¼ã‚¿)
â”‚   â””â”€â”€ JIAsyno_CITEseq_full.rds            (å…¨ä½“è§£æç”¨ãƒ‡ãƒ¼ã‚¿)
â”œâ”€â”€ single_cell_analysis.Rmd                  (Part 1: å…¨ä½“è§£æ)
â””â”€â”€ single_cell_analysis_T.Rmd                (Part 2: Tç´°èƒã‚µãƒ–ã‚¯ãƒ©ã‚¹è§£æ)
```

### B. ãƒ‡ãƒ¼ã‚¿ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

æœ¬è¬›ç¾©ã§ã¯ **GSE278962** (JIA Synovial CITE-seq) ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
- è¬›ç¾©è³‡æ–™ã§é…å¸ƒã•ã‚Œã‚‹ `.rds` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’[ã“ã¡ã‚‰](https://drive.google.com/drive/folders/1ZW-uxlEOZ7xWBXT1D6wTNbN6fYFvRMye?usp=sharing)ã‚ˆã‚Šãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€ä¸Šè¨˜ã® `data/` ãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®ã—ã¦ãã ã•ã„ã€‚
- è¬›ç¾©è³‡æ–™ã§ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è¨­å®šæ–¹æ³•ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

---

## 6. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ç¢ºèª

RStudioã‚’èµ·å‹•ï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³4å‚ç…§ï¼‰ã—ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```r
# --- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ ---

cat("=== R ãƒãƒ¼ã‚¸ãƒ§ãƒ³ ===\n")
cat(R.version.string, "\n\n")

cat("=== ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª ===\n")

# å¿…é ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç¢ºèªï¼ˆsingle_cell_analysis_T.Rmd ã§ä½¿ç”¨ï¼‰
packages <- c("Seurat", "BiocStyle", "patchwork",
              "dplyr", "magrittr", "knitr", "rmarkdown")

for (pkg in packages) {
  tryCatch({
    library(pkg, character.only = TRUE)
    cat(sprintf("  âœ“ %-15s : %s\n", pkg, packageVersion(pkg)))
  }, error = function(e) {
    cat(sprintf("  âœ— %-15s : ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼\n", pkg))
  })
}

cat("\n=== çµæœ ===\n")
cat("ä¸Šè¨˜ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã™ã¹ã¦ âœ“ ã§ã‚ã‚Œã°ã€æº–å‚™å®Œäº†ã§ã™ï¼\n")
```

### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›ï¼ˆå‚è€ƒï¼‰

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | æœŸå¾…ã•ã‚Œã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ |
|-----------|-------------------|
| R         | 4.3.2             |
| Seurat    | 5.2.1             |
| BiocStyle | 2.30.0            |
| patchwork | 1.1.3             |
| dplyr     | 1.1.4             |
| magrittr  | 2.0.3             |
| knitr     | 1.45              |
| rmarkdown | 2.25              |

> **ğŸ’¡ æ³¨æ„**ï¼šå¤šå°‘ã®ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®é•ã„ï¼ˆä¾‹ï¼š1.1.3 vs 1.1.4ï¼‰ã¯å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚
> ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆä¾‹ï¼šSeurat 5.x.x vs 4.x.xï¼‰ãŒç•°ãªã‚‹å ´åˆã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚

---

## 7. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Q1. `conda` ã‚³ãƒãƒ³ãƒ‰ãŒè¦‹ã¤ã‹ã‚‰ãªã„ï¼ˆ"command not found"ï¼‰

**macOS ã®å ´åˆï¼š**
ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‰ã˜ã¦å†åº¦é–‹ã„ã¦ãã ã•ã„ã€‚ãã‚Œã§ã‚‚è§£æ±ºã—ãªã„å ´åˆï¼š
```bash
# ã‚·ã‚§ãƒ«ã®åˆæœŸåŒ–
~/miniforge3/bin/conda init
```
ãã®å¾Œã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚

**Windows ã®å ´åˆï¼š**
é€šå¸¸ã®ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã¯ãªãã€**Miniforge Prompt** ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
ã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒMiniforge Promptã€ã¨æ¤œç´¢ã—ã¦é–‹ã„ã¦ãã ã•ã„ã€‚

### Q2. `conda activate scworkshop` ãŒå‹•ä½œã—ãªã„

```bash
conda init
```
ã‚’å®Ÿè¡Œå¾Œã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ« / Miniforge Prompt ã‚’**é–‰ã˜ã¦å†åº¦é–‹ã„ã¦**ãã ã•ã„ã€‚

### Q3. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹

**Condaã§è§£æ±ºã§ããªã„å ´åˆ**ã¯ã€Rå†…ã‹ã‚‰ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è©¦ã¿ã¦ãã ã•ã„ï¼š

```bash
conda activate scworkshop
R
```

Rèµ·å‹•å¾Œï¼š

```r
# CRANãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å ´åˆ
install.packages("ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å")

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆï¼ˆä¾‹ï¼šSeurat 5.2.1ï¼‰
install.packages("remotes")
remotes::install_version("Seurat", version = "5.2.1")

# Bioconductorãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å ´åˆ
if (!require("BiocManager", quietly = TRUE)) install.packages("BiocManager")
BiocManager::install("ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å")
```

**macOS ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆï¼š**
Xcode Command Line ToolsãŒå¿…è¦ã§ã™ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š
```bash
xcode-select --install
```

**Windows ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆï¼š**
RtoolsãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™ï¼š
```bash
conda install -c conda-forge m2w64-toolchain -y
```

### Q4. RStudioãŒèµ·å‹•ã—ãªã„ / Rã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒé•ã†

å¿…ãš `conda activate scworkshop` ã‚’å®Ÿè¡Œã—ã¦ã‹ã‚‰ `rstudio` ã‚³ãƒãƒ³ãƒ‰ã§èµ·å‹•ã—ã¦ãã ã•ã„ã€‚
ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‹ã‚‰ã®èµ·å‹•ã§ã¯ã€åˆ¥ã®RãŒä½¿ã‚ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

### Q5. ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

- ä¸è¦ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‰ã˜ã‚‹
- RStudioã® Environment ã‚¿ãƒ–ã§ä¸è¦ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å‰Šé™¤ï¼ˆ`rm(object_name); gc()`ï¼‰

### Q6. Seuratã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ5.x.xã§ã¯ãªã4.x.xã«ãªã‚‹

```bash
conda activate scworkshop
conda install -c conda-forge r-seurat=5.2.1 r-seuratobject=5.0.2 -y
```

---

## 8. å‚è€ƒï¼šsessionInfo() ã®å®Œå…¨å‡ºåŠ›

`single_cell_analysis_T.html` ã‚’ç”Ÿæˆã—ãŸç’°å¢ƒã®å®Œå…¨ãªæƒ…å ±ã§ã™ã€‚ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ™‚ã«ã”å‚ç…§ãã ã•ã„ã€‚

```
R version 4.3.2 (2023-10-31)
Platform: aarch64-apple-darwin20 (64-bit)
Running under: macOS 26.2

attached base packages:
 stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 patchwork_1.1.3    magrittr_2.0.3     Seurat_5.2.1
 SeuratObject_5.0.2 sp_2.1-2           BiocStyle_2.30.0  

loaded via a namespace (and not attached):
 RColorBrewer_1.1-3     rstudioapi_0.15.0      jsonlite_1.8.8        
 spatstat.utils_3.1-2    ggbeeswarm_0.7.2       magick_2.8.2          
 farver_2.1.1            rmarkdown_2.25         vctrs_0.6.5           
 ROCR_1.0-11             spatstat.explore_3.3-4  htmltools_0.5.7       
 sass_0.4.8              sctransform_0.4.1      parallelly_1.36.0     
 KernSmooth_2.23-22      bslib_0.6.1            htmlwidgets_1.6.4     
 ica_1.0-3               plyr_1.8.9             plotly_4.10.3         
 zoo_1.8-12              cachem_1.0.8           igraph_1.6.0          
 mime_0.12               lifecycle_1.0.4        pkgconfig_2.0.3       
 Matrix_1.6-5            R6_2.5.1               fastmap_1.1.1         
 fitdistrplus_1.1-11     future_1.33.1          shiny_1.8.0           
 digest_0.6.33           colorspace_2.1-0       tensor_1.5            
 RSpectra_0.16-1         irlba_2.3.5.1          labeling_0.4.3        
 progressr_0.14.0        fansi_1.0.6            spatstat.sparse_3.1-0 
 httr_1.4.7              polyclip_1.10-6        abind_1.4-5           
 compiler_4.3.2          withr_2.5.2            fastDummies_1.7.3     
 highr_0.10              MASS_7.3-60            tools_4.3.2           
 vipor_0.4.7             lmtest_0.9-40          beeswarm_0.4.0        
 httpuv_1.6.13           future.apply_1.11.1    goftest_1.2-3         
 glue_1.6.2              nlme_3.1-163           promises_1.2.1        
 grid_4.3.2              Rtsne_0.17             cluster_2.1.4         
 reshape2_1.4.4          generics_0.1.3         gtable_0.3.4          
 spatstat.data_3.1-4     tidyr_1.3.0            data.table_1.16.0     
 utf8_1.2.4              spatstat.geom_3.3-5    RcppAnnoy_0.0.21      
 ggrepel_0.9.4           RANN_2.6.1             pillar_1.9.0          
 stringr_1.5.1           limma_3.58.1           spam_2.10-0           
 RcppHNSW_0.5.0          later_1.3.2            splines_4.3.2         
 dplyr_1.1.4             lattice_0.21-9         survival_3.5-7        
 deldir_2.0-2            tidyselect_1.2.0       miniUI_0.1.1.1        
 pbapply_1.7-2           knitr_1.45             gridExtra_2.3         
 bookdown_0.37           scattermore_1.2        xfun_0.41             
 statmod_1.5.0           matrixStats_1.2.0      stringi_1.8.3         
 lazyeval_0.2.2          yaml_2.3.8             evaluate_0.23         
 codetools_0.2-19        tibble_3.2.1           BiocManager_1.30.22   
 cli_3.6.2               uwot_0.1.16            xtable_1.8-4          
 reticulate_1.35.0       munsell_0.5.0          jquerylib_0.1.4       
 Rcpp_1.0.11             globals_0.16.2         spatstat.random_3.3-2 
 png_0.1-8               ggrastr_1.0.2          spatstat.univar_3.1-2 
 parallel_4.3.2          ellipsis_0.3.2         ggplot2_3.4.4         
 presto_1.0.0            dotCall64_1.1-1        listenv_0.9.0         
 viridisLite_0.4.2       scales_1.3.0           ggridges_0.5.5        
 purrr_1.0.2             rlang_1.1.2            cowplot_1.1.2
```
